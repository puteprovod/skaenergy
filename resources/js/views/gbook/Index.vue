<template>
    <div class="max-w-screen-xl flex mx-auto mb-10" ref="scrollComponent">
        <div class="items-center align-center md:px-5 md:basis-[75%] basis-full">
            <div v-if="infoMessage" v-html="infoMessage" id="infoMessage"
                 class="mt-5 px-7 py-4 shadow-sm text-sm text-ska-blue md:rounded-xl bg-blue-200 text-sm" role="alert">
            </div>
            <div v-if="errorMessage"
                 class="mt-5 px-7 py-4 shadow-sm text-sm text-red-800 md:rounded-xl bg-red-200 text-sm" role="alert">
                <span class="font-medium">{{ errorMessage }}</span>
            </div>
            <div v-if="user && !user.email_verified"
                 class="bg-white mt-5 px-7 py-4 shadow-sm font-semibold font-gray-500 md:rounded-xl flex flex-wrap flex-grow">
                <div class="text-gray-500 text-sm tracking-tight my-auto">
                    –í–≤–µ–¥–∏—Ç–µ –∫–æ–¥, –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –≤–∞–º –Ω–∞ email: <span class="text-ska-blue font-bold">{{
                        user.email
                    }}</span>:
                </div>
                <div class="flex-nowrap mt-3 my-auto lg:ml-auto lg:mt-0 ml-2">
                    <input type="text" id="code" v-model="code"
                           class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg inline-flex focus:ring-blue-500 focus:border-blue-500 block w-24 p-2.5 mr-2 flex-nowrap"
                           placeholder="XXXX–•–•">
                    <input type="submit" @click.prevent="tryToSendCode" value="–û—Ç–ø—Ä–∞–≤–∏—Ç—å"
                           class="bg-ska-blue rounded-lg hover:bg-[#274D82] inline-flex items-center font-medium text-sm text-white p-2.5 px-3 cursor-pointer flex-nowrap">
                    <input type="submit" @click.prevent="tryToRequestNewCode" value="&#8635;"
                           class="bg-ska-blue ml-1 rounded-lg hover:bg-[#274D82] inline-flex items-center font-medium text-sm text-white p-2.5 px-3 cursor-pointer flex-nowrap">

                </div>
            </div>
            <div v-if="mode==='userPosts'"
                 class="bg-white mt-5 p-7 shadow-sm font-semibold font-gray-500 md:rounded-xl flex">
                <div class="inline-block text-ska-blue text-base my-auto">
                    –í—Å–µ –ø–æ—Å—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è {{ user.nick }}, –Ω–∞–π–¥–µ–Ω–æ {{ user.post_count }} —à—Ç.
                </div>
                <div class="ml-auto">
                    <button type="button" @click.prevent="mode='index'; posts = []; getPosts();"
                            class="bg-gray-500 rounded-lg hover:bg-[#274D82] inline-flex items-center font-medium text-sm text-white p-2.5 px-5 cursor-pointer">
                        –ù–∞–∑–∞–¥ –≤ –≥–æ—Å—Ç–µ–≤—É—é
                        <svg aria-hidden="true" class="w-5 h-5 ml-2 -mr-1" fill="currentColor" viewBox="0 0 20 20"
                             xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd"
                                  d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z"
                                  clip-rule="evenodd"></path>
                        </svg>
                    </button>
                </div>
            </div>
            <div v-if="user && mode!=='userPosts' && user.email_verified"
                 class="text-sm bg-white mt-5 p-7 shadow-sm md:rounded-xl flex">
                <div class="w-full">
                    <div>
                    <textarea v-model="comment" @focusin="showPostButtons = true" @keyup="formNotEmpty"
                              @focusout="!showEmojiBox && !showCodeBox && !rulesOpened && !isFormNotEmpty ? showPostButtons = false : ''"
                              id="messageArea" :class="showPostButtons ? 'h-48' : 'h-20'"
                              rows="4"
                              class="block p-2.5 w-full text-base text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-ska-blue"
                              placeholder="–ß—Ç–æ —Å–∫–∞–∂–µ—Ç–µ?"></textarea>
                    </div>
                    <div :class="showPostButtons ? 'block' : 'hidden'">
                        <div class="inline-block">
                            <input @click.prevent="tryToPost"
                                   :class="isFormNotEmpty ? 'bg-ska-blue font-medium cursor-pointer hover:bg-[#274D82]' : 'bg-gray-500'"
                                   type="submit" value="–û—Ç–ø—Ä–∞–≤–∏—Ç—å"
                                   class="rounded-lg text-sm text-white p-2.5 px-8 mt-3">
                        </div>
                        <div class="inline-block align-middle content-center">
                            <a href="#" @mousedown="rulesOpened = true"
                               class="text-gray-500 hover:text-ska-blue md:hidden font-medium ml-7 text-sm tracking-tight">–ü—Ä–∞–≤–∏–ª–∞</a>
                            <a href="#" @mousedown="rulesOpened = true"
                               class="text-gray-500 hover:text-ska-blue hidden md:block font-medium ml-7 text-sm tracking-tight">–ü—Ä–∞–≤–∏–ª–∞ –≥–æ—Å—Ç–µ–≤–æ–π</a>
                        </div>
                        <div class="float-right inline-block pt-1.5">
                            <a href="#" @mousedown="showEmojiBox = !showEmojiBox; showPostButtons = true"
                               title="–°–º–∞–π–ª–∏–∫–∏"
                               class="text-4xl text-gray-500 hover:text-ska-blue">&#9786;</a>
                        </div>
                        <div class="float-right inline-block mt-1.5 mr-2 pt-1.5 hidden md:block">
                            <a href="#" @mousedown="showCodeBox = !showCodeBox; showPostButtons = true"
                               title="–ö–æ–¥—ã"
                               class="text-2xl text-gray-500 hover:text-ska-blue">[b]</a>
                        </div>
                    </div>
                </div>
                <div class="w-40 ml-5 text-2xl flex-none" :class="showCodeBox ? 'block' : 'hidden'">
                    <CodeBox/>
                </div>
                <div class="w-40 ml-5 text-2xl flex-none" :class="showEmojiBox ? 'block' : 'hidden'">
                    <EmojiBox :key="componentKey"/>
                </div>
            </div>
            <div v-for="post in posts" class="text-sm bg-white mt-5 p-7 shadow-sm md:rounded-xl">
                <PostComponent :post="post"/>
            </div>
            <div v-if="loading" class="mx-auto w-12 h-12">
                <svg aria-hidden="true" class="w-10 h-10 mr-2 text-gray-200 animate-spin fill-blue-600" viewBox="0 0 100 101" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z" fill="currentColor"/>
                    <path d="M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z" fill="currentFill"/>
                </svg>
            </div>
        </div>
        <div class="basis-[25%] hidden md:block md:pr-5 min-w-min">
            <LoginForm :showAllPosts="true" ref="loginForm"/>
        </div>
    </div>
    <Rules :trigger="rulesOpened" :key="rulesOpened"></Rules>
</template>

<script>
import LoginForm from "../components/LoginForm.vue";
import EmojiBox from "../components/EmojiBox.vue";
import PostComponent from "../components/PostComponent.vue";
import Rules from "../components/Rules.vue";
import CodeBox from "../components/CodeBox.vue";

export default {
    name: "index",
    mounted() {
        this.getPosts()
        this.getEmojiWindow()
        window.addEventListener("scroll", this.handleScroll)
        if (this.$route.query.changedPassword === 'true') {
            this.infoMessage = '<span class="font-medium font-semibold">–í–∞—à –ø–∞—Ä–æ–ª—å —É—Å–ø–µ—à–Ω–æ –∏–∑–º–µ–Ω–µ–Ω. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å –¥–ª—è –≤—Ö–æ–¥–∞.</span>'
            setTimeout(() => {
                this.infoMessage = ''
            }, 10 * 1000);
        }
        if (this.$route.query.infoMessageX) {
            this.infoMessage = '<span class="font-medium font-semibold">' + this.$route.query.infoMessageX + '</span>'
        }
    },
    unmounted() {
        window.removeEventListener("scroll", this.handleScroll)
    },

    created() {
        document.title = this.$route.meta.title;
    },
    data() {
        return {
            posts: [],
            comment: '',
            loading: false,
            emojiWindowSize: 35,
            emojiWindowPos: 0,
            showCodeBox: false,
            componentKey: 0,
            showEmojiBox: false,
            showPostButtons: false,
            isFormNotEmpty: false,
            errorMessage: '',
            infoMessage: '',
            mode: 'index',
            code: '',
            user: null,
            rulesOpened: false,
            emojis: ['üòÄ', 'üòÅ', 'üòÇ', 'ü§£', 'üòÉ', 'üòÑ', 'üòÖ', 'üòÜ', 'üòâ', 'üòä', 'üòã', 'üòé', 'üòç', 'üòò', 'üòó', 'üòô', 'üòö', 'üôÇ', 'ü§ó', 'ü§î', 'üòê', 'üòë', 'üò∂', 'üôÑ', 'üòè', 'üò£', 'üò•', 'üòÆ', 'ü§ê', 'üòØ', 'üò™', 'üò´', 'üò¥', 'üòå', 'ü§ì', 'üòõ', 'üòú', 'üòù', 'ü§§', 'üòí', 'üòì', 'üòî', 'üòï', 'üôÉ', 'ü§ë', 'üò≤', 'üôÅ', 'üòñ', 'üòû', 'üòü', 'üò§', 'üò¢', 'üò≠', 'üò¶', 'üòß', 'üò®', 'üò©', 'üò¨', 'üò∞', 'üò±', 'üò≥', 'üòµ', 'üò°', 'üò†', 'üòá', 'ü§†', 'ü§°', 'ü§•', 'üò∑', 'ü§í', 'ü§ï', 'ü§¢', 'ü§ß', 'üòà', 'üëø', 'üëπ', 'üë∫', 'üíÄ', '‚ò†', 'üëª', 'üëΩ', 'üëæ', 'ü§ñ', 'üí©', 'üò∫', 'üò∏', 'üòπ', 'üòª', 'üòº', 'üòΩ', 'üôÄ', 'üòø', 'üòæ', 'üôà', 'üôâ', 'üôä', 'üë¶', 'üë¶üèª', 'üë¶üèº', 'üë¶üèΩ', 'üë¶üèæ', 'üë¶üèø', 'üëß', 'üëßüèª', 'üëßüèº', 'üëßüèΩ', 'üëßüèæ', 'üëßüèø', 'üë®', 'üë®üèª', 'üë®üèº', 'üë®üèΩ', 'üë®üèæ', 'üë®üèø', 'üë©', 'üë©üèª', 'üë©üèº', 'üë©üèΩ', 'üë©üèæ', 'üë©üèø', 'üë¥', 'üë¥üèª', 'üë¥üèº', 'üë¥üèΩ', 'üë¥üèæ', 'üë¥üèø', 'üëµ', 'üëµüèª', 'üëµüèº', 'üëµüèΩ', 'üëµüèæ', 'üëµüèø', 'üë∂', 'üë∂üèª', 'üë∂üèº', 'üë∂üèΩ', 'üë∂üèæ', 'üë∂üèø', 'üëº', 'üëºüèª', 'üëºüèº', 'üëºüèΩ', 'üëºüèæ', 'üëºüèø', 'üëÆ', 'üëÆüèª', 'üëÆüèº', 'üëÆüèΩ', 'üëÆüèæ', 'üëÆüèø', 'üïµ', 'üïµüèª', 'üïµüèº', 'üïµüèΩ', 'üïµüèæ', 'üïµüèø', 'üíÇ', 'üíÇüèª', 'üíÇüèº', 'üíÇüèΩ', 'üíÇüèæ', 'üíÇüèø', 'üë∑', 'üë∑üèª', 'üë∑üèº', 'üë∑üèΩ', 'üë∑üèæ', 'üë∑üèø', 'üë≥', 'üë≥üèª', 'üë≥üèº', 'üë≥üèΩ', 'üë≥üèæ', 'üë≥üèø', 'üë±', 'üë±üèª', 'üë±üèº', 'üë±üèΩ', 'üë±üèæ', 'üë±üèø', 'üéÖ', 'üéÖüèª', 'üéÖüèº', 'üéÖüèΩ', 'üéÖüèæ', 'üéÖüèø', 'ü§∂', 'ü§∂üèª', 'ü§∂üèº', 'ü§∂üèΩ', 'ü§∂üèæ', 'ü§∂üèø', 'üë∏', 'üë∏üèª', 'üë∏üèº', 'üë∏üèΩ', 'üë∏üèæ', 'üë∏üèø', 'ü§¥', 'ü§¥üèª', 'ü§¥üèº', 'ü§¥üèΩ', 'ü§¥üèæ', 'ü§¥üèø', 'üë∞', 'üë∞üèª', 'üë∞üèº', 'üë∞üèΩ', 'üë∞üèæ', 'üë∞üèø', 'ü§µ', 'ü§µüèª', 'ü§µüèº', 'ü§µüèΩ', 'ü§µüèæ', 'ü§µüèø', 'ü§∞', 'ü§∞üèª', 'ü§∞üèº', 'ü§∞üèΩ', 'ü§∞üèæ', 'ü§∞üèø', 'üë≤', 'üë≤üèª', 'üë≤üèº', 'üë≤üèΩ', 'üë≤üèæ', 'üë≤üèø', 'üôç', 'üôçüèª', 'üôçüèº', 'üôçüèΩ', 'üôçüèæ', 'üôçüèø', 'üôé', 'üôéüèª', 'üôéüèº', 'üôéüèΩ', 'üôéüèæ', 'üôéüèø', 'üôÖ', 'üôÖüèª', 'üôÖüèº', 'üôÖüèΩ', 'üôÖüèæ', 'üôÖüèø', 'üôÜ', 'üôÜüèª', 'üôÜüèº', 'üôÜüèΩ', 'üôÜüèæ', 'üôÜüèø', 'üíÅ', 'üíÅüèª', 'üíÅüèº', 'üíÅüèΩ', 'üíÅüèæ', 'üíÅüèø', 'üôã', 'üôãüèª', 'üôãüèº', 'üôãüèΩ', 'üôãüèæ', 'üôãüèø', 'üôá', 'üôáüèª', 'üôáüèº', 'üôáüèΩ', 'üôáüèæ', 'üôáüèø', 'ü§¶', 'ü§¶üèª', 'ü§¶üèº', 'ü§¶üèΩ', 'ü§¶üèæ', 'ü§¶üèø', 'ü§∑', 'ü§∑üèª', 'ü§∑üèº', 'ü§∑üèΩ', 'ü§∑üèæ', 'ü§∑üèø', 'üíÜ', 'üíÜüèª', 'üíÜüèº', 'üíÜüèΩ', 'üíÜüèæ', 'üíÜüèø', 'üíá', 'üíáüèª', 'üíáüèº', 'üíáüèΩ', 'üíáüèæ', 'üíáüèø', 'üö∂', 'üö∂üèª', 'üö∂üèº', 'üö∂üèΩ', 'üö∂üèæ', 'üö∂üèø', 'üèÉ', 'üèÉüèª', 'üèÉüèº', 'üèÉüèΩ', 'üèÉüèæ', 'üèÉüèø', 'üíÉ', 'üíÉüèª', 'üíÉüèº', 'üíÉüèΩ', 'üíÉüèæ', 'üíÉüèø', 'üï∫', 'üï∫üèª', 'üï∫üèº', 'üï∫üèΩ', 'üï∫üèæ', 'üï∫üèø', 'üëØ', 'üï¥', 'üó£', 'üë§', 'üë•', 'ü§∫', 'üèá', '‚õ∑', 'üèÇ', 'üèå', 'üèÑ', 'üèÑüèª', 'üèÑüèº', 'üèÑüèΩ', 'üèÑüèæ', 'üèÑüèø', 'üö£', 'üö£üèª', 'üö£üèº', 'üö£üèΩ', 'üö£üèæ', 'üö£üèø', 'üèä', 'üèäüèª', 'üèäüèº', 'üèäüèΩ', 'üèäüèæ', 'üèäüèø', '‚õπ', '‚õπüèª', '‚õπüèº', '‚õπüèΩ', '‚õπüèæ', '‚õπüèø', 'üèã', 'üèãüèª', 'üèãüèº', 'üèãüèΩ', 'üèãüèæ', 'üèãüèø', 'üö¥', 'üö¥üèª', 'üö¥üèº', 'üö¥üèΩ', 'üö¥üèæ', 'üö¥üèø', 'üöµ', 'üöµüèª', 'üöµüèº', 'üöµüèΩ', 'üöµüèæ', 'üöµüèø', 'üèé', 'üèç', 'ü§∏', 'ü§∏üèª', 'ü§∏üèº', 'ü§∏üèΩ', 'ü§∏üèæ', 'ü§∏üèø', 'ü§º', 'ü§ºüèª', 'ü§ºüèº', 'ü§ºüèΩ', 'ü§ºüèæ', 'ü§ºüèø', 'ü§Ω', 'ü§Ωüèª', 'ü§Ωüèº', 'ü§ΩüèΩ', 'ü§Ωüèæ', 'ü§Ωüèø', 'ü§æ', 'ü§æüèª', 'ü§æüèº', 'ü§æüèΩ', 'ü§æüèæ', 'ü§æüèø', 'ü§π', 'ü§πüèª', 'ü§πüèº', 'ü§πüèΩ', 'ü§πüèæ', 'ü§πüèø', 'üë´', 'üë¨', 'üë≠', 'üíè', 'üë©‚Äç‚ù§Ô∏è‚Äçüíã‚Äçüë®', 'üë®‚Äç‚ù§Ô∏è‚Äçüíã‚Äçüë®', 'üë©‚Äç‚ù§Ô∏è‚Äçüíã‚Äçüë©', 'üíë', 'üë©‚Äç‚ù§Ô∏è‚Äçüë®', 'üë®‚Äç‚ù§Ô∏è‚Äçüë®', 'üë©‚Äç‚ù§Ô∏è‚Äçüë©', 'üë™', 'üë®‚Äçüë©‚Äçüë¶', 'üë®‚Äçüë©‚Äçüëß', 'üë®‚Äçüë©‚Äçüëß‚Äçüë¶', 'üë®‚Äçüë©‚Äçüë¶‚Äçüë¶', 'üë®‚Äçüë©‚Äçüëß‚Äçüëß', 'üë®‚Äçüë®‚Äçüë¶', 'üë®‚Äçüë®‚Äçüëß', 'üë®‚Äçüë®‚Äçüëß‚Äçüë¶', 'üë®‚Äçüë®‚Äçüë¶‚Äçüë¶', 'üë®‚Äçüë®‚Äçüëß‚Äçüëß', 'üë©‚Äçüë©‚Äçüë¶', 'üë©‚Äçüë©‚Äçüëß', 'üë©‚Äçüë©‚Äçüëß‚Äçüë¶', 'üë©‚Äçüë©‚Äçüë¶‚Äçüë¶', 'üë©‚Äçüë©‚Äçüëß‚Äçüëß', 'üèª', 'üèº', 'üèΩ', 'üèæ', 'üèø', 'üí™', 'üí™üèª', 'üí™üèº', 'üí™üèΩ', 'üí™üèæ', 'üí™üèø', 'ü§≥', 'ü§≥üèª', 'ü§≥üèº', 'ü§≥üèΩ', 'ü§≥üèæ', 'ü§≥üèø', 'üëà', 'üëàüèª', 'üëàüèº', 'üëàüèΩ', 'üëàüèæ', 'üëàüèø', 'üëâ', 'üëâüèª', 'üëâüèº', 'üëâüèΩ', 'üëâüèæ', 'üëâüèø', '‚òù', '‚òùüèª', '‚òùüèº', '‚òùüèΩ', '‚òùüèæ', '‚òùüèø', 'üëÜ', 'üëÜüèª', 'üëÜüèº', 'üëÜüèΩ', 'üëÜüèæ', 'üëÜüèø', 'üñï', 'üñïüèª', 'üñïüèº', 'üñïüèΩ', 'üñïüèæ', 'üñïüèø', 'üëá', 'üëáüèª', 'üëáüèº', 'üëáüèΩ', 'üëáüèæ', 'üëáüèø', '‚úå', '‚úåüèª', '‚úåüèº', '‚úåüèΩ', '‚úåüèæ', '‚úåüèø', 'ü§û', 'ü§ûüèª', 'ü§ûüèº', 'ü§ûüèΩ', 'ü§ûüèæ', 'ü§ûüèø', 'üññ', 'üññüèª', 'üññüèº', 'üññüèΩ', 'üññüèæ', 'üññüèø', 'ü§ò', 'ü§òüèª', 'ü§òüèº', 'ü§òüèΩ', 'ü§òüèæ', 'ü§òüèø', 'ü§ô', 'ü§ôüèª', 'ü§ôüèº', 'ü§ôüèΩ', 'ü§ôüèæ', 'ü§ôüèø', 'üñê', 'üñêüèª', 'üñêüèº', 'üñêüèΩ', 'üñêüèæ', 'üñêüèø', '‚úã', '‚úãüèª', '‚úãüèº', '‚úãüèΩ', '‚úãüèæ', '‚úãüèø', 'üëå', 'üëåüèª', 'üëåüèº', 'üëåüèΩ', 'üëåüèæ', 'üëåüèø', 'üëç', 'üëçüèª', 'üëçüèº', 'üëçüèΩ', 'üëçüèæ', 'üëçüèø', 'üëé', 'üëéüèª', 'üëéüèº', 'üëéüèΩ', 'üëéüèæ', 'üëéüèø', '‚úä', '‚úäüèª', '‚úäüèº', '‚úäüèΩ', '‚úäüèæ', '‚úäüèø', 'üëä', 'üëäüèª', 'üëäüèº', 'üëäüèΩ', 'üëäüèæ', 'üëäüèø', 'ü§õ', 'ü§õüèª', 'ü§õüèº', 'ü§õüèΩ', 'ü§õüèæ', 'ü§õüèø', 'ü§ú', 'ü§úüèª', 'ü§úüèº', 'ü§úüèΩ', 'ü§úüèæ', 'ü§úüèø', 'ü§ö', 'ü§öüèª', 'ü§öüèº', 'ü§öüèΩ', 'ü§öüèæ', 'ü§öüèø', 'üëã', 'üëãüèª', 'üëãüèº', 'üëãüèΩ', 'üëãüèæ', 'üëãüèø', 'üëè', 'üëèüèª', 'üëèüèº', 'üëèüèΩ', 'üëèüèæ', 'üëèüèø', '‚úç', '‚úçüèª', '‚úçüèº', '‚úçüèΩ', '‚úçüèæ', '‚úçüèø', 'üëê', 'üëêüèª', 'üëêüèº', 'üëêüèΩ', 'üëêüèæ', 'üëêüèø', 'üôå', 'üôåüèª', 'üôåüèº', 'üôåüèΩ', 'üôåüèæ', 'üôåüèø', 'üôè', 'üôèüèª', 'üôèüèº', 'üôèüèΩ', 'üôèüèæ', 'üôèüèø', 'ü§ù', 'ü§ùüèª', 'ü§ùüèº', 'ü§ùüèΩ', 'ü§ùüèæ', 'ü§ùüèø', 'üíÖ', 'üíÖüèª', 'üíÖüèº', 'üíÖüèΩ', 'üíÖüèæ', 'üíÖüèø', 'üëÇ', 'üëÇüèª', 'üëÇüèº', 'üëÇüèΩ', 'üëÇüèæ', 'üëÇüèø', 'üëÉ', 'üëÉüèª', 'üëÉüèº', 'üëÉüèΩ', 'üëÉüèæ', 'üëÉüèø', 'üë£', 'üëÄ', 'üëÅ', 'üëÅ‚Äçüó®', 'üëÖ', 'üëÑ', 'üíã', 'üíò', '‚ù§', 'üíì', 'üíî', 'üíï', 'üíñ', 'üíó', 'üíô', 'üíö', 'üíõ', 'üíú', 'üñ§', 'üíù', 'üíû', 'üíü', '‚ù£', 'üíå', 'üí§', 'üí¢', 'üí£', 'üí•', 'üí¶', 'üí®', 'üí´', 'üí¨', 'üó®', 'üóØ', 'üí≠', 'üï≥', 'üëì', 'üï∂', 'üëî', 'üëï', 'üëñ', 'üëó', 'üëò', 'üëô', 'üëö', 'üëõ', 'üëú', 'üëù', 'üõç', 'üéí', 'üëû', 'üëü', 'üë†', 'üë°', 'üë¢', 'üëë', 'üëí', 'üé©', 'üéì', '‚õë', 'üìø', 'üíÑ', 'üíç', 'üíé', 'üêµ', 'üêí', 'ü¶ç', 'üê∂', 'üêï', 'üê©', 'üê∫', 'ü¶ä', 'üê±', 'üêà', 'ü¶Å', 'üêØ', 'üêÖ', 'üêÜ', 'üê¥', 'üêé', 'ü¶å', 'ü¶Ñ', 'üêÆ', 'üêÇ', 'üêÉ', 'üêÑ', 'üê∑', 'üêñ', 'üêó', 'üêΩ', 'üêè', 'üêë', 'üêê', 'üê™', 'üê´', 'üêò', 'ü¶è', 'üê≠', 'üêÅ', 'üêÄ', 'üêπ', 'üê∞', 'üêá', 'üêø', 'ü¶á', 'üêª', 'üê®', 'üêº', 'üêæ', 'ü¶É', 'üêî', 'üêì', 'üê£', 'üê§', 'üê•', 'üê¶', 'üêß', 'üïä', 'ü¶Ö', 'ü¶Ü', 'ü¶â', 'üê∏', 'üêä', 'üê¢', 'ü¶é', 'üêç', 'üê≤', 'üêâ', 'üê≥', 'üêã', 'üê¨', 'üêü', 'üê†', 'üê°', 'ü¶à', 'üêô', 'üêö', 'ü¶Ä', 'ü¶ê', 'ü¶ë', 'ü¶ã', 'üêå', 'üêõ', 'üêú', 'üêù', 'üêû', 'üï∑', 'üï∏', 'ü¶Ç', 'üíê', 'üå∏', 'üíÆ', 'üèµ', 'üåπ', 'ü•Ä', 'üå∫', 'üåª', 'üåº', 'üå∑', 'üå±', 'üå≤', 'üå≥', 'üå¥', 'üåµ', 'üåæ', 'üåø', '‚òò', 'üçÄ', 'üçÅ', 'üçÇ', 'üçÉ', 'üçá', 'üçà', 'üçâ', 'üçä', 'üçã', 'üçå', 'üçç', 'üçé', 'üçè', 'üçê', 'üçë', 'üçí', 'üçì', 'ü•ù', 'üçÖ', 'ü•ë', 'üçÜ', 'ü•î', 'ü•ï', 'üåΩ', 'üå∂', 'ü•í', 'üçÑ', 'ü•ú', 'üå∞', 'üçû', 'ü•ê', 'ü•ñ', 'ü•û', 'üßÄ', 'üçñ', 'üçó', 'ü•ì', 'üçî', 'üçü', 'üçï', 'üå≠', 'üåÆ', 'üåØ', 'ü•ô', 'ü•ö', 'üç≥', 'ü•ò', 'üç≤', 'ü•ó', 'üçø', 'üç±', 'üçò', 'üçô', 'üçö', 'üçõ', 'üçú', 'üçù', 'üç†', 'üç¢', 'üç£', 'üç§', 'üç•', 'üç°', 'üç¶', 'üçß', 'üç®', 'üç©', 'üç™', 'üéÇ', 'üç∞', 'üç´', 'üç¨', 'üç≠', 'üçÆ', 'üçØ', 'üçº', 'ü•õ', '‚òï', 'üçµ', 'üç∂', 'üçæ', 'üç∑', 'üç∏', 'üçπ', 'üç∫', 'üçª', 'ü•Ç', 'ü•É', 'üçΩ', 'üç¥', 'ü•Ñ', 'üî™', 'üè∫', 'üåç', 'üåé', 'üåè', 'üåê', 'üó∫', 'üóæ', 'üèî', '‚õ∞', 'üåã', 'üóª', 'üèï', 'üèñ', 'üèú', 'üèù', 'üèû', 'üèü', 'üèõ', 'üèó', 'üèò', 'üèô', 'üèö', 'üè†', 'üè°', 'üè¢', 'üè£', 'üè§', 'üè•', 'üè¶', 'üè®', 'üè©', 'üè™', 'üè´', 'üè¨', 'üè≠', 'üèØ', 'üè∞', 'üíí', 'üóº', 'üóΩ', '‚õ™', 'üïå', 'üïç', '‚õ©', 'üïã', '‚õ≤', '‚õ∫', 'üåÅ', 'üåÉ', 'üåÑ', 'üåÖ', 'üåÜ', 'üåá', 'üåâ', '‚ô®', 'üåå', 'üé†', 'üé°', 'üé¢', 'üíà', 'üé™', 'üé≠', 'üñº', 'üé®', 'üé∞', 'üöÇ', 'üöÉ', 'üöÑ', 'üöÖ', 'üöÜ', 'üöá', 'üöà', 'üöâ', 'üöä', 'üöù', 'üöû', 'üöã', 'üöå', 'üöç', 'üöé', 'üöê', 'üöë', 'üöí', 'üöì', 'üöî', 'üöï', 'üöñ', 'üöó', 'üöò', 'üöô', 'üöö', 'üöõ', 'üöú', 'üö≤', 'üõ¥', 'üõµ', 'üöè', 'üõ£', 'üõ§', '‚õΩ', 'üö®', 'üö•', 'üö¶', 'üöß', 'üõë', '‚öì', '‚õµ', 'üõ∂', 'üö§', 'üõ≥', '‚õ¥', 'üõ•', 'üö¢', '‚úà', 'üõ©', 'üõ´', 'üõ¨', 'üí∫', 'üöÅ', 'üöü', 'üö†', 'üö°', 'üöÄ', 'üõ∞', 'üõé', 'üö™', 'üõå', 'üõè', 'üõã', 'üöΩ', 'üöø', 'üõÄ', 'üõÄüèª', 'üõÄüèº', 'üõÄüèΩ', 'üõÄüèæ', 'üõÄüèø', 'üõÅ', '‚åõ', '‚è≥', '‚åö', '‚è∞', '‚è±', '‚è≤', 'üï∞', 'üïõ', 'üïß', 'üïê', 'üïú', 'üïë', 'üïù', 'üïí', 'üïû', 'üïì', 'üïü', 'üïî', 'üï†', 'üïï', 'üï°', 'üïñ', 'üï¢', 'üïó', 'üï£', 'üïò', 'üï§', 'üïô', 'üï•', 'üïö', 'üï¶', 'üåë', 'üåí', 'üåì', 'üåî', 'üåï', 'üåñ', 'üåó', 'üåò', 'üåô', 'üåö', 'üåõ', 'üåú', 'üå°', '‚òÄ', 'üåù', 'üåû', '‚≠ê', 'üåü', 'üå†', '‚òÅ', '‚õÖ', '‚õà', 'üå§', 'üå•', 'üå¶', 'üåß', 'üå®', 'üå©', 'üå™', 'üå´', 'üå¨', 'üåÄ', 'üåà', 'üåÇ', '‚òÇ', '‚òî', '‚õ±', '‚ö°', '‚ùÑ', '‚òÉ', '‚õÑ', '‚òÑ', 'üî•', 'üíß', 'üåä', 'üéÉ', 'üéÑ', 'üéÜ', 'üéá', '‚ú®', 'üéà', 'üéâ', 'üéä', 'üéã', 'üéç', 'üéé', 'üéè', 'üéê', 'üéë', 'üéÄ', 'üéÅ', 'üéó', 'üéü', 'üé´', 'üéñ', 'üèÜ', 'üèÖ', 'ü•á', 'ü•à', 'ü•â', '‚öΩ', '‚öæ', 'üèÄ', 'üèê', 'üèà', 'üèâ', 'üéæ', 'üé±', 'üé≥', 'üèè', 'üèë', 'üèí', 'üèì', 'üè∏', 'ü•ä', 'ü•ã', 'ü•Ö', 'üéØ', '‚õ≥', '‚õ∏', 'üé£', 'üéΩ', 'üéø', 'üéÆ', 'üïπ', 'üé≤', '‚ô†', '‚ô•', '‚ô¶', '‚ô£', 'üÉè', 'üÄÑ', 'üé¥', 'üîá', 'üîà', 'üîâ', 'üîä', 'üì¢', 'üì£', 'üìØ', 'üîî', 'üîï', 'üéº', 'üéµ', 'üé∂', 'üéô', 'üéö', 'üéõ', 'üé§', 'üéß', 'üìª', 'üé∑', 'üé∏', 'üéπ', 'üé∫', 'üéª', 'ü•Å', 'üì±', 'üì≤', '‚òé', 'üìû', 'üìü', 'üì†', 'üîã', 'üîå', 'üíª', 'üñ•', 'üñ®', '‚å®', 'üñ±', 'üñ≤', 'üíΩ', 'üíæ', 'üíø', 'üìÄ', 'üé•', 'üéû', 'üìΩ', 'üé¨', 'üì∫', 'üì∑', 'üì∏', 'üìπ', 'üìº', 'üîç', 'üîé', 'üî¨', 'üî≠', 'üì°', 'üïØ', 'üí°', 'üî¶', 'üèÆ', 'üìî', 'üìï', 'üìñ', 'üìó', 'üìò', 'üìô', 'üìö', 'üìì', 'üìí', 'üìÉ', 'üìú', 'üìÑ', 'üì∞', 'üóû', 'üìë', 'üîñ', 'üè∑', 'üí∞', 'üí¥', 'üíµ', 'üí∂', 'üí∑', 'üí∏', 'üí≥', 'üíπ', 'üí±', 'üí≤', '‚úâ', 'üìß', 'üì®', 'üì©', 'üì§', 'üì•', 'üì¶', 'üì´', 'üì™', 'üì¨', 'üì≠', 'üìÆ', 'üó≥', '‚úè', '‚úí', 'üñã', 'üñä', 'üñå', 'üñç', 'üìù', 'üíº', 'üìÅ', 'üìÇ', 'üóÇ', 'üìÖ', 'üìÜ', 'üóí', 'üóì', 'üìá', 'üìà', 'üìâ', 'üìä', 'üìã', 'üìå', 'üìç', 'üìé', 'üñá', 'üìè', 'üìê', '‚úÇ', 'üóÉ', 'üóÑ', 'üóë', 'üîí', 'üîì', 'üîè', 'üîê', 'üîë', 'üóù', 'üî®', '‚õè', '‚öí', 'üõ†', 'üó°', '‚öî', 'üî´', 'üèπ', 'üõ°', 'üîß', 'üî©', '‚öô', 'üóú', '‚öó', '‚öñ', 'üîó', '‚õì', 'üíâ', 'üíä', 'üö¨', '‚ö∞', '‚ö±', 'üóø', 'üõ¢', 'üîÆ', 'üõí', 'üèß', 'üöÆ', 'üö∞', '‚ôø', 'üöπ', 'üö∫', 'üöª', 'üöº', 'üöæ', 'üõÇ', 'üõÉ', 'üõÑ', 'üõÖ', '‚ö†', 'üö∏', '‚õî', 'üö´', 'üö≥', 'üö≠', 'üöØ', 'üö±', 'üö∑', 'üìµ', 'üîû', 'üá¶üá®', 'üá¶üá©', 'üá¶üá™', 'üá¶üá´', 'üá¶üá¨', 'üá¶üáÆ', 'üá¶üá±', 'üá¶üá≤', 'üá¶üá¥', 'üá¶üá∂', 'üá¶üá∑', 'üá¶üá∏', 'üá¶üáπ', 'üá¶üá∫', 'üá¶üáº', 'üá¶üáΩ', 'üá¶üáø', 'üáßüá¶', 'üáßüáß', 'üáßüá©', 'üáßüá™', 'üáßüá´', 'üáßüá¨', 'üáßüá≠', 'üáßüáÆ', 'üáßüáØ', 'üáßüá±', 'üáßüá≤', 'üáßüá≥', 'üáßüá¥', 'üáßüá∂', 'üáßüá∑', 'üáßüá∏', 'üáßüáπ', 'üáßüáª', 'üáßüáº', 'üáßüáæ', 'üáßüáø', 'üá®üá¶', 'üá®üá®', 'üá®üá©', 'üá®üá´', 'üá®üá¨', 'üá®üá≠', 'üá®üáÆ', 'üá®üá∞', 'üá®üá±', 'üá®üá≤', 'üá®üá≥', 'üá®üá¥', 'üá®üáµ', 'üá®üá∑', 'üá®üá∫', 'üá®üáª', 'üá®üáº', 'üá®üáΩ', 'üá®üáæ', 'üá®üáø', 'üá©üá™', 'üá©üá¨', 'üá©üáØ', 'üá©üá∞', 'üá©üá≤', 'üá©üá¥', 'üá©üáø', 'üá™üá¶', 'üá™üá®', 'üá™üá™', 'üá™üá¨', 'üá™üá≠', 'üá™üá∑', 'üá™üá∏', 'üá™üáπ', 'üá™üá∫', 'üá´üáÆ', 'üá´üáØ', 'üá´üá∞', 'üá´üá≤', 'üá´üá¥', 'üá´üá∑', 'üá¨üá¶', 'üá¨üáß', 'üá¨üá©', 'üá¨üá™', 'üá¨üá´', 'üá¨üá¨', 'üá¨üá≠', 'üá¨üáÆ', 'üá¨üá±', 'üá¨üá≤', 'üá¨üá≥', 'üá¨üáµ', 'üá¨üá∂', 'üá¨üá∑', 'üá¨üá∏', 'üá¨üáπ', 'üá¨üá∫', 'üá¨üáº', 'üá¨üáæ', 'üá≠üá∞', 'üá≠üá≤', 'üá≠üá≥', 'üá≠üá∑', 'üá≠üáπ', 'üá≠üá∫', 'üáÆüá®', 'üáÆüá©', 'üáÆüá™', 'üáÆüá±', 'üáÆüá≤', 'üáÆüá≥', 'üáÆüá¥', 'üáÆüá∂', 'üáÆüá∑', 'üáÆüá∏', 'üáÆüáπ', 'üáØüá™', 'üáØüá≤', 'üáØüá¥', 'üáØüáµ', 'üá∞üá™', 'üá∞üá¨', 'üá∞üá≠', 'üá∞üáÆ', 'üá∞üá≤', 'üá∞üá≥', 'üá∞üáµ', 'üá∞üá∑', 'üá∞üáº', 'üá∞üáæ', 'üá∞üáø', 'üá±üá¶', 'üá±üáß', 'üá±üá®', 'üá±üáÆ', 'üá±üá∞', 'üá±üá∑', 'üá±üá∏', 'üá±üáπ', 'üá±üá∫', 'üá±üáª', 'üá±üáæ', 'üá≤üá¶', 'üá≤üá®', 'üá≤üá©', 'üá≤üá™', 'üá≤üá´', 'üá≤üá¨', 'üá≤üá≠', 'üá≤üá∞', 'üá≤üá±', 'üá≤üá≤', 'üá≤üá≥', 'üá≤üá¥', 'üá≤üáµ', 'üá≤üá∂', 'üá≤üá∑', 'üá≤üá∏', 'üá≤üáπ', 'üá≤üá∫', 'üá≤üáª', 'üá≤üáº', 'üá≤üáΩ', 'üá≤üáæ', 'üá≤üáø', 'üá≥üá¶', 'üá≥üá®', 'üá≥üá™', 'üá≥üá´', 'üá≥üá¨', 'üá≥üáÆ', 'üá≥üá±', 'üá≥üá¥', 'üá≥üáµ', 'üá≥üá∑', 'üá≥üá∫', 'üá≥üáø', 'üá¥üá≤', 'üáµüá¶', 'üáµüá™', 'üáµüá´', 'üáµüá¨', 'üáµüá≠', 'üáµüá∞', 'üáµüá±', 'üáµüá≤', 'üáµüá≥', 'üáµüá∑', 'üáµüá∏', 'üáµüáπ', 'üáµüáº', 'üáµüáæ', 'üá∂üá¶', 'üá∑üá™', 'üá∑üá¥', 'üá∑üá∏', 'üá∑üá∫', 'üá∑üáº', 'üá∏üá¶', 'üá∏üáß', 'üá∏üá®', 'üá∏üá©', 'üá∏üá™', 'üá∏üá¨', 'üá∏üá≠', 'üá∏üáÆ', 'üá∏üáØ', 'üá∏üá∞', 'üá∏üá±', 'üá∏üá≤', 'üá∏üá≥', 'üá∏üá¥', 'üá∏üá∑', 'üá∏üá∏', 'üá∏üáπ', 'üá∏üáª', 'üá∏üáΩ', 'üá∏üáæ', 'üá∏üáø', 'üáπüá¶', 'üáπüá®', 'üáπüá©', 'üáπüá´', 'üáπüá¨', 'üáπüá≠', 'üáπüáØ', 'üáπüá∞', 'üáπüá±', 'üáπüá≤', 'üáπüá≥', 'üáπüá¥', 'üáπüá∑', 'üáπüáπ', 'üáπüáª', 'üáπüáº', 'üáπüáø', 'üá∫üá¶', 'üá∫üá¨', 'üá∫üá≤', 'üá∫üá∏', 'üá∫üáæ', 'üá∫üáø', 'üáªüá¶', 'üáªüá®', 'üáªüá™', 'üáªüá¨', 'üáªüáÆ', 'üáªüá≥', 'üáªüá∫', 'üáºüá´', 'üáºüá∏', 'üáΩüá∞', 'üáæüá™', 'üáæüáπ', 'üáøüá¶', 'üáøüá≤', 'üáøüáº'],
        }
    },
    components: {
        CodeBox,
        Rules,
        PostComponent,
        EmojiBox,
        LoginForm
    },
    methods: {
        getPosts() {
            this.axios.get('/api/gbook/posts')
                .then(res => {
                    const posts = res.data.data
                    this.posts = this.preparePostComments(posts)
                })
        },
        preparePostComments(comments) {
            comments.forEach(function (item) {
                item.comment = item.comment.replaceAll('<a ', '<a class="text-ska-blue font-semibold hover:underline break-all" ');
                item.comment = item.comment.replaceAll('<img ', '<img class="inline-block"');
            })
            return comments
        },
        getEmojiWindow() {
            this.emojiWindow = this.emojis.slice(this.emojiWindowPos, this.emojiWindowSize)
        },
        emojiWindowRight() {
            this.emojiWindowPos = this.emojiWindowPos + this.emojiWindowSize
            if (this.emojis.length <= this.emojiWindowPos)
                this.emojiWindowPos = 0
            this.componentKey += 1
        },
        emojiWindowLeft() {
            this.emojiWindowPos = this.emojiWindowPos - this.emojiWindowSize
            if (this.emojiWindowPos < 0)
                this.emojiWindowPos = this.emojis.length - (this.emojis.length % this.emojiWindowSize)
            this.componentKey += 1
        },
        formNotEmpty() {
            this.isFormNotEmpty = (document.getElementById('messageArea').value !== '')
        },
        addEmoji(emoji) {
            emoji = ' ' + emoji
            let el = document.getElementById('messageArea');
            let val = el.value, endIndex, range, doc = el.ownerDocument;
            if (typeof el.selectionStart == "number"
                && typeof el.selectionEnd == "number") {
                endIndex = el.selectionEnd;
                el.value = val.slice(0, endIndex) + emoji + val.slice(endIndex);
                el.selectionStart = el.selectionEnd = endIndex + emoji.length;
            } else if (doc.selection !== "undefined" && doc.selection.createRange) {
                el.focus();
                range = doc.selection.createRange();
                range.collapse(false);
                range.text = emoji;
                range.select();
            }
        },
        loadMorePosts() {
            this.loading = true
            const lastElement = this.posts.slice(-1)
            const url = (this.mode === 'userPosts') ? '/api/gbook/posts/' + this.user.id : '/api/gbook/posts/'
            this.axios.post(url, {
                'last': lastElement[0].id
            })
                .then(res => {
                    let newPosts = res.data.data
                    console.log(res.data.data)
                    newPosts = this.preparePostComments(newPosts)
                    this.posts.push(...newPosts)
                    console.log(newPosts)
                    if (newPosts.length > 0) {
                        window.addEventListener("scroll", this.handleScroll)
                    } else {
                        window.removeEventListener("scroll", this.handleScroll)
                    }
                    this.loading = false
                })
        },
        handleScroll() {
            let element = this.$refs.scrollComponent
            if (element.getBoundingClientRect().bottom < window.innerHeight) {
                window.removeEventListener("scroll", this.handleScroll)
                this.loadMorePosts()
                console.log('yes!')
            }
        },
        successLogin() {
            this.infoMessage = '<span class="font-medium font-semibold">–£—Å–ø–µ—à–Ω—ã–π –≤—Ö–æ–¥.</span>'
            setTimeout(() => {
                this.infoMessage = ''
            }, 3 * 1000);
        },
        userLogged(user) {
            this.user = user
        },
        userLoggedOut() {
            this.user = null
            this.infoMessage = '<span class="font-medium font-semibold">–í—ã —É—Å–ø–µ—à–Ω–æ –≤—ã—à–ª–∏ –∏–∑ —Å–∏—Å—Ç–µ–º—ã.</span>'
            setTimeout(() => {
                this.infoMessage = ''
            }, 3 * 1000);
        },
        getUserPosts(user) {
            this.posts = [];
            this.axios.get(`/api/gbook/posts/${user.id}`)
                .then(res => {
                    const posts = res.data.data
                    this.posts = this.preparePostComments(posts)
                    this.user = user
                    this.mode = 'userPosts'
                })
        },
        tryToSendCode() {
            if (!this.code) {
                this.errorMessage = '–í—ã –Ω–µ —É–∫–∞–∑–∞–ª–∏ –∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è';
                setTimeout(() => {
                    this.errorMessage = ''
                }, 5 * 1000);
                return;
            }
            this.axios.post(`/code_verify`, {
                code: this.code,
                email: this.user.email
            })
                .then(res => {
                    this.infoMessage = '<span class="font-medium font-semibold">–í–∞—à email —É—Å–ø–µ—à–Ω–æ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω</span>'
                    setTimeout(() => {
                        this.infoMessage = ''
                    }, 5 * 1000);
                    this.user.email_verified = true;
                }).catch(error => {
                this.errorMessage = error.response.data.message
                setTimeout(() => {
                    this.errorMessage = ''
                }, 5 * 1000);
            })
        },
        tryToRequestNewCode() {
            this.axios.get(`/user/${this.user.id}/send_code`)
                .then(res => {
                    this.infoMessage = '<span class="font-medium">–ö–æ–¥ –≤—ã—Å–ª–∞–Ω –ø–æ–≤—Ç–æ—Ä–Ω–æ –Ω–∞ –≤–∞—à email</span> <span class="font-bold">serg-419@yandex.ru</span>'
                    setTimeout(() => {
                        this.infoMessage = ''
                    }, 5 * 1000);
                })
        },
        tryToPost() {
            this.axios.post(`/api/gbook/posts/create`, {
                comment: this.comment
            })
                .then(res => {
                    let newPost = []
                    newPost[0] = res.data.data
                    newPost = this.preparePostComments(newPost)
                    this.posts.unshift(newPost[0])
                    this.comment = ''
                    this.isFormNotEmpty = false;
                    this.showPostButtons = false;
                    this.showEmojiBox = false;
                    this.infoMessage = '<span class="font-medium">–í–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ!</span>'
                    setTimeout(() => {
                        this.infoMessage = ''
                    }, 5 * 1000);
                    let child = this.$refs.loginForm;
                    child.user.post_count++;
                }).catch(
                error => {
                    this.errorMessage = error.response.data.message
                    setTimeout(() => {
                        this.errorMessage = ''
                    }, 5 * 1000);
                    console.log(error)
                }
            )
        },
        tryToReport(id){
            if (this.user) {
                this.axios.get(`/api/gbook/post/${id}/report`)
                    .then(res => {
                        this.infoMessage = '<span class="font-medium">–°–ø–∞—Å–∏–±–æ —á—Ç–æ —Å–æ–æ–±—â–∏–ª–∏! –ú–æ–¥–µ—Ä–∞—Ç–æ—Ä –æ–±—Ä–∞—Ç–∏—Ç –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ —ç—Ç–æ—Ç –ø–æ—Å—Ç.</span>'
                        setTimeout(() => {
                            this.infoMessage = ''
                        }, 5 * 1000);
                    })
                window.scrollTo(0,0)
            }else{
                this.infoMessage = '<span class="font-medium">–í—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã–º email, —á—Ç–æ–±—ã –∏–º–µ—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ–æ–±—â–∏—Ç—å –º–æ–¥–µ—Ä–∞—Ç–æ—Ä—É –æ –ø—Ä–æ–±–ª–µ–º–µ.</span>'
                setTimeout(() => {
                    this.infoMessage = ''
                }, 5 * 1000);
                window.scrollTo(0,0)
            }
        }
    }
}
</script>

<style scoped>

</style>
